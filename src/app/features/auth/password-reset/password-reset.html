<div class="password-reset-container">
  <div class="password-reset-card">
    <!-- Logo y título -->
    <div class="card-header text-center">
      <img src="assets/images/logo-sg.svg" alt="SICE GROUP" class="brand-logo mb-3" />
      <h1 class="card-title">Recuperar Contraseña</h1>
      <p class="card-subtitle">Te enviaremos una nueva contraseña a tu correo</p>
    </div>

    @if (success()) {
      <!-- Estado de éxito -->
      <div class="success-state">
        <div class="success-icon">
          <i class="bi bi-check-circle-fill"></i>
        </div>
        <h2 class="success-title">Correo enviado</h2>
        <p class="success-message">
          Hemos enviado una nueva contraseña a tu correo electrónico.
          Revisa tu bandeja de entrada.
        </p>
        <a routerLink="/auth/login" class="btn btn-primary w-100">
          <i class="bi bi-arrow-left me-2"></i>
          Volver al inicio de sesión
        </a>
      </div>
    } @else {
      <!-- Formulario -->
      <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
        <!-- Campo Email -->
        <div class="mb-4">
          <label for="email" class="form-label">
            <i class="bi bi-envelope me-1"></i>
            Correo Electrónico
          </label>
          <input
            type="email"
            class="form-control"
            id="email"
            formControlName="email"
            placeholder="tu@email.com"
            [class.is-invalid]="isFieldInvalid('email')"
            (input)="onFieldChange()"
            autocomplete="email"
          />
          @if (isFieldInvalid('email')) {
            <div class="invalid-feedback">
              {{ getFieldError('email') }}
            </div>
          }
        </div>

        <!-- Mensaje de error -->
        @if (error()) {
          <div class="alert alert-danger d-flex align-items-center" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <div>{{ error() }}</div>
          </div>
        }

        <!-- Botón de submit -->
        <button
          type="submit"
          class="btn btn-primary w-100 mb-3"
          [disabled]="loading()"
        >
          @if (loading()) {
            <span>
              <app-loading-spinner></app-loading-spinner>
              Enviando...
            </span>
          } @else {
            <span>
              <i class="bi bi-send me-2"></i>
              Enviar nueva contraseña
            </span>
          }
        </button>

        <!-- Link para volver -->
        <div class="text-center">
          <a routerLink="/auth/login" class="back-link">
            <i class="bi bi-arrow-left me-1"></i>
            Volver al inicio de sesión
          </a>
        </div>
      </form>
    }
  </div>
</div>
